# 物联网复习

## **题型**

- 单选 12*1.5‘
- 多选 12*2’
- 名词解释 4*2‘
- 判断题 8*1’
- 简答 4*8’
- 材料题 1*10‘

## 第一章 绪论

### RFID

RFID 即射频识别，又称电子标签、无线射频识别、电子条码等。RFID 射频识别是一种非接触式的自动识别技术，它通过射频信号自动识别目标对象并获取相关数据，识别工作无须人工干预，可识别高速运动物体并可同时识别多个标签，工作于各种恶劣环境，操作快捷方便。

### 物联网历史进程（时间节点）

- 1999/8 年首次提出物联网概念
- 2008 年美国 IBM 提出 "智慧地球"
- 2009 年中国 “感知中国”
- 2009 年欧盟 “物联网行动”

### 物联网的定义

物联网（Internet of Things）是通过使用射频识别（Radio Frequency Identification，RFID）、传感器、红外感应器、全球定位系统、激光扫描器等信息采集设备，按约定的协议，把任何物品与互联网连接起来，进行信息交换和通讯，以实现智能化识别、定位、跟踪、监控和管理的一种网络。

### 物联网的特点

- 全面感知
- 可靠传递
- 智能处理

<img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250104215929252.png" alt="image-20250104215929252" style="zoom: 33%;" />

### 物联网与传感网、泛在网（普适网）的区别

#### 无线传感器网络 Wireless Sensor Networks

包含传感器节点，按计算能力可分为普通节点和汇聚节点等；

传感器节点包含了具有采集环境数据功能的感应器和具有联网功能的电子元件；

节点间能够通过特有无线通信方式互联（如：ZigBee）。

#### 泛在网络 Ubiquitous Networking

在现有电子通信范畴内通信网络的基础上，提出无处不在网络，即，任何人无论何时、何地都可以何种方式实现通信和服务的接入；

泛在网络支持人与人、人与物、物与物之间的通信；

#### 区别与联系

泛在网、物联网和传感网是依次包容的关系。

传感器网络专注于物与物之间的末端联系，它专注于物理世界信息的感知和采集，专注于网络的分发和汇聚效率；专注于低速高效，低功低耗。

物联网是面向物与物和人与物的网络，它包含多种感知单元（传感器、RFID 等等），同时支持一种或几种网络通信方式，为现实世界提供服务和应用。

泛在网涵盖并高于物联网，讲求多网络和多技术融合，探索通信和服务的无缝连接，探索人与人之间新的通信和服务方式。

### 物联网的体系结构：三层、各层分别有哪些技术

#### 感知层

全面的信息感知，是物联网的皮肤和五官，通过传感器、RFID、智能卡、条形码、人机接口等多种信息感知设备，解决数据获取和入网问题。

##### 感知和识别技术

感知和识别技术是指对各类物体的识别和信息获取技术，是物联网的信息源头和最底层的核心技术。特点是利用多种 **传感器**、**RFID**、**条形码**、摄像头、智能设备等来全面感知物体的各种信息，具有节点数量多、成本低、计算能力弱等特点。

- 传感器：是能够感受表征物体特征的非电物理量（如温度、压力等），并按照一定规律转换成易于测量、传输和处理的电量（如电流、电压等）的一种器件或装置。主要完成信息检测任务，相当于物联网的“神经元”。
- 条形码：是指由一组规则排列的条、空及其对应字符组成的标识，用以表示商品信息，是识别商品的“身份证”和进入国内外市场的通行证。有一维码、二维码、三维码。
- RFID：俗称电子标签，组成：标签（射频卡）、阅读器、天线；原理：是利用无线射频信号通过空间交变电磁场耦合原理，实现非接触、双向通信和信息的自动识别。

##### 无线传感网

无线传感器网络（Wireless Sensor Network，WSN），简称无线传感网。是由有限或无限多个体积小巧的传感器节点组成，可以感受环境参数变化，每一个节点都是微微型计算机，可以将收集到的信息转化成为数字信号，通过自组织无线网络发送给具有更大处理能力的服务器。

#### 网络层

是物联网的神经中枢和大脑，解决信息的可靠传输和智能处理。

##### 网络传输技术

网络传输技术：主要是指各种信息与互联网的组网、融合、传输和接入技术。包括移动 4G/5G、Internet 、Wi-Fi、ZigBee、蓝牙技术、异构互联、协同技术、M2M 等。从信号传递的形式来说分为有线网络及无线网络。

有线网络：互联网、有线电话网（电信网）、有线电视网、现场总线等

无线网络：根据不同的应用有多种，如手机/GPRS 网络、Wi-Fi、ZigBee、蓝牙等。

#### 应用层

即各行各业的应用平台，相当于物联网的社会分工，主要解决信息智能处理和人机界面的问题。

##### 智能处理技术

智能处理技术是利用智能控制、嵌入式系统、云计算、大数据、区块链、人工智能和智能制造等高端智能技术，完成各种智能计算、海量数据挖掘与处理和智能化控制等智能服务功能。

- 智能控制：就是通过智能机自动地完成其目标的控制过程。
- 嵌入式系统：是嵌入到对象体系中的专用计算机系统。
- 云计算：是一种海量数据并行运算体系。
- 大数据：是指所涉及的数据规模非常巨大，需要通过新处理模式才能使之成为人类所能解读的数据集合。
- 人工智能：是研究使计算机来模拟人的某些思维过程和智能行为（如学习、推理、思考、规划等）的技术。

| 技术层次       | 关键技术                                                     |
| -------------- | ------------------------------------------------------------ |
| 智能处理技术   | 智能控制、人工智能、嵌入式系统、云计算、边缘计算、大数据、区块链、智能制造等高端数据处理技术。 |
| 网络传输技术   | 互联网、M2M、5G/移动通信网、无线宽带网、GIS/GPS 等            |
| 融合和接入技术 | 现场总线(有线），蓝牙、Wi-Fi、ZigBee、无线传感网等短距离无线通信技术 |
| 感知和识别技术 | 传感器、RFID、条形码、各种智能卡、摄像机等                   |

## **第二章 感知和识别**

### **传感器技术**

#### 定义

能够感受规定的被测量并按照一定的规律转换成可用输出信号的器件或装置。

#### 工作原理

感受表征物体特征的非电物理量（如温度、压力等），并按照一定规律转换成易于测量、传输和处理的电量（如电流、电压等）

#### 组成部分及各部分功能

- 敏感元件：直接感受被测量并输出与被测量 **性质相同**、**有确定关系** 的 **物理量** 的元件。
- 转换元件：传感器的 **核心元件**，它把敏感元件感知的 **非电量转换为电信号**。
- 变换电路：将转换元件输出的电量，变换成 **适用于传输或测量的标准电信号**。

#### 分类

- 按输入被测量分

  | **基本被测量** | **派生的被测量**                                         |
  | -------------- | -------------------------------------------------------- |
  | 热工量         | 温度、热量、比热、压力、压差、流量、流速、风速、真空度   |
  | 机械量         | 位移、尺度、形状、力、应力、力矩、振动、加速度、噪声     |
  | 物理化学量     | 气体（液体）化学成分、浓度、盐度、粘度、湿度、密度、比重 |
  | 生物医学量     | 心音、血压、体温、气流量、心电流、眼压、脑电波           |

  

- 按工作原理分

  | **基本被测量** | **派生的被测量**                   |
  | -------------- | ---------------------------------- |
  | 变电阻         | 电位器式、应变式、压阻式传感器     |
  | 变电容         | 电容式、温敏式传感器               |
  | 变电势         | 霍尔式、热电偶式传感器             |
  | 变磁阻         | 电感式、差动变压器式、涡流式传感器 |

  

- 按敏感元件与被测对象之间的能量关系分

  | **基本被测量** | **派生的被测量**                                             |
  | -------------- | ------------------------------------------------------------ |
  | 能量转换型     | 直接由被测对象提供能量  如热电偶温度传感器、压电式加速度传感器 |
  | 能量输入型     | 外部提供能量，由被测量控制外部供给能量的变化  如电阻应变片   |

  

- 按信号变换特征分

  | **基本被测量** | **派生的被测量**                                             |
  | -------------- | ------------------------------------------------------------ |
  | 物性型         | 依靠敏感元件材料本身特性的变化实现信号变换  如水银温度计     |
  | 结构型         | 依靠传感器结构参数的变化实现信号转变  如电容式和电感式传感器 |

  

- 按输出信号分

  <img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105120652525.png" alt="image-20250105120652525" style="zoom:50%;" />

#### 常见传感器

##### 温度传感器

温度传感器主要由 **热敏元件** 组成。

热敏元件是利用 **某些物体的物理性质** 随温度变化而发生变化的敏感材料制成。如：热敏电阻。

**热敏电阻** 的材料是半导体；其阻值会随着温度的升高而减小，具有负温度系数；

热敏电阻能够把 **温度这个物理热学量** 转换成为 **电阻** 这个电学量。

##### 光照传感器

光照传感器主要由 **光敏元件** 组成。

光敏元件是利用 **某些物体的物理性质** 随光照强度变化而变化的敏感材料制成。如：光敏电阻。

**光敏电阻** 的材料是半导体（如硫化镉）；其阻值会随着光照强度的升高而减小；

光敏电阻能够把 **光照强度这个物理光学量** 转换成为 **电阻** 这个电学量。

##### 电容式位移传感器

电容式位移传感器能够把 **物体位移** 这个力学量转换为 **电容** 这个电学量。

##### 其他敏感元件

**力敏元件**：利用半导体材料的压阻效应（即对其某一方向施加压力，其电阻率就发生变化）和良好的弹性，广泛用于压力、加速度等物理力学量的测量。

**气敏元件：** 常用的主要有接触燃烧式气体传感器、电化学气敏传感器和半导体气敏传感器等。

**磁敏元件：** 指特性参数随外界磁性量变化而明显变化的敏感元件。典型的有霍尔器件。

#### 现代传感器

通过微电子机械系统 **MEMS** 加工技术产生的新一代传感器件，具有集成化、信噪比高、灵敏度高、微型化、低成本等特点，极大地提高了传感器性能。

##### 微型传感器

**体积小：** 体积只有传统普通传感器的几十分之一乃至几百分之一，面积大多在 1mm^2^以下。

在许多领域得到了越来越广泛的应用。目前常用的有力和压力微传感器、速度与加速度微传感器、热微传感器、磁微传感器、化学微传感器、生物微传感器、光电微传感器、以及声表面波微传感器等。

##### 智能传感器

是传感器集成化与微处理机相结合的产物，具有信息采集、处理和交换能力。

将传感器敏感元件、信号调理电路、微处理器及数字信号接口电路集成在一块芯片上构成。

大多应用于工业领域：航空、机器人等。

##### 数字传感器

基于模拟传感器基础上，集成了 A/D 转换器、CPU 处理等相关功能模块，输出为数字量(或数字编码)的传感器。

采用标准数字通信接口，可直接连入计算机或控制总线。

稳定性和抗干扰能力更强

##### 一体化传感器

将若干种敏感元件组装在同一种材料或单独一块芯片上的一体化传感器。

**突出特点：** 能同时实现 **多种物理量** 的检测功能

##### 网络传感器

是利用 TCP/IP 协议，使现场测控数据就近接入网络；

并与网络上有通信能力的节点直接进行通信；

实现数据的实时发布与共享。

有数据采集单元、数据处理单元、网络接口单元，这三个单元可以采用不同芯片构成合成式的，也可是单片式结构。

**网络传感器的核心** 是使传感器本身实现网络通信协议。

### 自动识别技术

#### 定义

自动识别技术就是应用一定的识别装置——自动识别系统 **AIDS**；通过识别装置与物品的 **接近**，**自动地获取** 被识别物品的相关信息；并提供给后台的计算机处理系统来完成相关后续处理的一种技术。

#### 基本类型及发展

##### 磁卡

磁卡识别技术 **是最早使用的卡类** 信息识别技术；是以具有信息存储功能的特殊材料，如液体磁性材料或 **磁条为信息载体**，将磁性材料涂印在基片上（如存折）；或将宽约 614mm 的磁条压贴在基片上（如常见的银联卡）通过高温热压缩形成的一种卡片状的磁性记录介质，与各种读卡器配合使用。

**基本原理**

磁卡识别技术是通过读卡器读取磁条中的数据来实现的；ISO7811 规定了磁条卡上 **三条磁道** 的数据格式和记录信息的位置。

##### IC 卡

将集成电路芯片镶嵌于塑料基片的指定位置上；利用集成电路的可存储特性，保存、读取和修改芯片上的信息。

按照数据传送形式不同，分为 IC 卡有接触式和非接触式两种。

**接触式 IC 卡** 的芯片金属触点暴露在外，可以直观看见，数据存储在卡体内嵌的集成电路中，通过芯片上的 8 个触点可与读写设备接触、交换信息。目前使用的 IC 卡多属这种。

**非接触式 IC 卡**，又称“无触点 IC 卡”或“射频卡（FR 卡）”，由 IC 芯片、感应天线组成，封装在一个标准的 PVC 卡片内，芯片及天线无任何外露部分。

**工作原理**

1、读写器是一台发射器，向外发射电磁波，“询问”附近的 IC 卡。如有多张 IC 卡同时应答，则分别处理。

2、IC 卡的天线接收到电磁波，产生感应电流，经二极管整流，在 C2 两端产生 2V 电压供芯片工作，并向读写器报告本卡的相关信息。

3、读写器接收来自 IC 卡的数据信号，并发出操作指令（应答或者对 IC 卡扣款）

##### 光学字符识别

光学字符识别(OCR)：是指通过电子设备，如扫描仪或数码相机等，对文本资料进行扫描，然后对图像文件进行分析处理，获取文字及版面信息的过程。

具体含义：利用扫描仪或数码相机检查纸上打印的字符，通过检测光线暗、亮的模式确定其形状，然后用字符识别的方法将形状翻译成计算机文字。

识别过程：图像输入、预处理、版面分析、字符切割、字符识别、后处理，最后经人工文稿校正，输出结果。

##### 生物识别

​	是指依靠人的身体特征来进行身份验证的对人的自动识别方法。

**采集的身体特征**

身体特征：包括指纹、声音、面部、骨架、视网膜、虹膜和 DNA 等人体的生物特征，以及签名的动作、行走的步态、击打键盘的力度等个人的行为特征。

常用的有：语音识别、指纹识别、人脸识别、视觉识别等技术。

### 条码技术

#### 定义

条码技术：将多个黑色条和空白条，按照一定的编码规则排列，用以表达一组信息的图形标识符。条形码的编码遵循 **唯一性** 原则。

#### 条形码 EAN-13 码

基本结构：是由一个接一个的“条”和“空”排列组成；靠条和空的不同宽度和位置来表达信息；这种由条、空组成的数据编码可以供机器识读，而且很容易译成二进制和十进制数；

组成要素：

- 条：条码中反射率较低的部分，一般印刷的颜色较深；
- 空：条码中反射率较高的部分，一般印刷的颜色较浅；
- 空白区：条码左右两端外侧与空的反射率相同的限定区域
- 起始符：位于条码起始位置的若干条与空
- 终止符：位于条码终止位置的若干条与空
- 中间分隔符：位于条码中间位置的若干条与空
- 条码数据符：表示特定信息的条码符号
- 校验符：表示校验码的条码若干条与空
- 供人识别字符：位于条码符的下方，与相应的条码相对应的、用于供人识别的字符

编码规则：

EAN 码是国际物品编码协会（INTERNATIONAL ARTICLE NUMBERING ASSOCIATION）在全球推广应用的商品条码。

连续定长的纯数字型条码；EAN 码有两种版本，标准版和缩短版，标准版由 13 位数字组成，称为 EAN-13 码，缩短版由 8 位数字组成，称为 EAN-8 码。

<img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105124312405.png" alt="image-20250105124312405" style="zoom:50%;" />

#### 二维码

是通过黑白相间、粗细不同的点阵图形来存储信息的，是一种在水平和垂直方向均能存储信息的条码技术。

**特点**

1. 信息容量大
2. 编码范围广
3. 保密防伪性能好
4. 译码可靠性高
5. 修正错误能力强
6. 容易制作成本低
7. 条码符号的形状可变

**分类**

- 行排式
- 矩阵式
- 邮政码

**QR 码**

版本 1-40，矩阵大小 $21\times21$ 到 $177\times177$，每个版本+4

### 射频识别系统（RFID）

射频识别（RFID）技术，俗称电子标签；RFID 是一种非接触、双向通信、简单方便的自动识别技术；

#### 系统的组成结构

电子标签（Tag）、阅读器（Reader）、射频天线(Antenna)以及后台处理计算机（Processor）4 部分组成

#### 电子标签

##### 定义

电子标签，也称射频卡，或应答器（Transponder），装设在被识别物体中；是射频识别系统的数据载体，存储着被识别物体的相关信息；具有读写和加密通信功能，通过无线电波与读写设备通信；

##### 分类

| **分类方式**       | **种类**          | **说**   **明**                                              |
| ------------------ | ----------------- | ------------------------------------------------------------ |
| **供电方式**       | **无源卡**        | 卡内无电池，利用波束供电技术将接收到的射频能量转化为直流电源为卡内电路供电，作用距离短，寿命长，对工作环境要求不高 |
|                    | **有源卡**        | 卡内有电源，作用距离较远，体积较大、成本高，且不适合在恶劣环境下工作 |
| 载波频率与作用距离 | 低频卡（LF）      | 主要有 125kHz 和 134kHz 两种，常用于短距离、低成本应用中，如门禁等。 |
|                    | 高频卡（HF）      | 频率为 13.56MHz，用于门禁控制和需传送大量数据的应用系统。     |
|                    | 超高频卡  （UHF） | 频率为 433 MHz、915 MHz、2.45 GHz、5.8 GHz 等，应用于需要较长读写距离和高读写速度的场合，如火车监控、高速公路收费、以及供应链管理。 |
| 调制方式           | 主动式            | 用自身的射频能量主动地发送数据给阅读器。                     |
|                    | 被动式            | 使用调制散射方式发射数据，它必须利用阅读器的载波调制自己的信号。 |
| 作用距离           | 密耦合卡          | 最小 1cm（密耦合卡），最远 10m 甚至更远（远距离卡）             |
| 芯片               | 只读卡            | 只读，唯一且无法修改的标识、价格低                           |
|                    | 读写卡            | 可擦写，可反复使用，价格较高                                 |
|                    | CPU 卡             | 芯片内部包含 CPU、存贮单元、I/O 接口单元。存储容量大，价格高。 |

#### 阅读器

##### 组成

阅读器，也称查询器，或读写器等，读取或写入电子标签信息的设备；

##### 职责功能

连通主机和电子标签的中间设备，将主机的读写命令加密后发送到电子标签，也将电子标签返回的数据解密后送到主机。

#### 天线

以电磁波的形式发射和接受信号的装置。

**频率**

| **发射频率**  | **说**   **明**                                              |
| ------------- | ------------------------------------------------------------ |
| 低频（LF）    | 主要有 125kHz 和 134kHz 两种，常用于短距离、低成本应用中，如门禁等。 |
| 高频（HF）    | 频率为 13.56MHz，用于门禁控制和需传送大量数据的应用系统。     |
| 超高频（UHF） | 频率为 433 MHz、915 MHz 等，应用于需要较长读写距离和高读写速度的场合，如火车监控、高速公路收费、以及供应链管理。 |
| 微波频段      | 频率为 2.45 GHz，远距离                                       |

#### 中间件

RFID 中间件：连接 RFID 阅读器和用户应用程序的一组通用的应用程序接口（API）。

- 读写适配器：提供 **通用标准** 的阅读器应用接口，消除不同阅读器与 API 之间的差别。
- 事件管理器：是进行 **数据预处理**，按照规则取得制定的数据。
- 应用程序接口：提供基于标准的服务接口，为 RFID 数据的收集 **提供应用程序层语义**，以满足大量应用的需要。

#### 识别流程

1、读写器发出射频信号, 产生磁场

2、标签进入磁场后，接收解读器发出的射频信号，产生感应电流

3、电子标签内的芯片被激活将数据传送至天线

4、天线反射信号, 回传信息至读写器

5、读取信息并解码，送至中央信息系统进行有关数据处理

#### 标准体系

![image-20250105131733107](./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105131733107.png)

##### ISO 18000-6 的命令格式

命令中的 RFU 位作为协议的扩展。

命令码的长度是 6 位。

命令标志的长度是 4 位。

使用 CRC-16 编码或者 CRC-5 编码取决于命令的位数

![image-20250105131910479](./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105131910479.png)

![image-20250105131939791](./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105131939791.png)

| **字段** | **说**   **明**                                              |
| -------- | ------------------------------------------------------------ |
| SYNC     | 通信协议同步帧，两个字节，固定为 0xff   0x55                  |
| ID       | 从设备地址，主机通过设定从设备地址，将通信内容发送给从设备，当 ID 等于 0xFF 0xFF 时，表示是广播方式 |
| Command  | X1 主命令，X2 从命令，协议的核心内容                          |
| Size     | 数据段大小，一个字节，最大 0xFF                               |
| Data     | 数据区                                                       |
| CRC      | CRC16 校验值，校验段：ID+Command+Size+Data                    |

### 无线定位技术

<img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105133317118.png" alt="image-20250105133317118" style="zoom:50%;" />

定位：查询和确定目标的位置信息。——我要找到你，还要能描述你的位置；

无线定位技术：用来判定移动用户位置的测量和计算方法，即通过对接收到的无线电波的一些参数进行测量，再利用定位算法计算出被测目标的具体位置。

#### GPS 定位原理

当用户接收机捕获到跟踪的卫星信号后，就可测量出接收天线至卫星的“伪距离”和距离的变化率；然后综合多颗卫星的数据解调出卫星轨道参数等数据；根据这些数据，接收机中的微处理计算机就可按定位解算方法进行定位计算，计算出用户所在地的位置信息；包括经纬度、高度、速度、时间等，并根据周围环境和路线标志给予语音和图形提示。

#### 定位技术

三角测量法等三类，同无线传感网定位技术

## 第四章 通信与网络

### 现场总线

是连接智能 **现场设备** 和 **自动化系统** 的 **一种网络**；将分散的有通信能力的测量控制设备作为网络节点，连接成能相互沟通信息，**共同完成自控任务** 的控制网络。

#### 特点

- 应用在生产现场；
- 全数字、全开放、全双工、多节点；
- 将专用微处理器置入传统的测量控制仪表，各自都具有数字计算和数字通信能力；
- 数字通信有串行和并行两种基本方式。
- 现场总线是自动化领域的通信、网络技术, 也被称之为工厂的底层网络；
- 总线是构成自动化系统的纽带，网络所传输的是测控信息；
- 是有别于计算机网络，电视、电话网络的另一类网络；
- 多为 **短帧** 传送

#### CAN 区域控制网络总线

属于 ISO 标准：ISO 11898，CAN 是控制器局域网络(Control Area Network)的简称，它最早是由德国的 Bosch 公司开发出来的，起初它是为汽车的检测和控制而设计的，后来逐步发展到用于其它工业部门；

CAN 是目前唯一被批准为国际标准的现场总线，得到了 Motorola、Intel、Philip、NEC 等公司的支持，并广泛应用在离散控制领域。

**结构介质**

- CAN 协议遵循 ISO/OSI 模型，采用了其中的 **物理层，链路层与应用层** 的三层结构。
- CAN 的最高通信速率为 1Mb/s（通信距离为 40m），其最远通信距离可达 10km（通信速率为 5kbps），最多可挂接设备数达 110 个。**传输介质可以是双绞线，光纤** 等。
- CAN 的信号传输采用短帧结构，每一帧有效字节数为 8 个，这样传输时间短，受干扰的概率低，每帧信息均有 CRC 效验和其他检错措施，通信误码率极低。
- CAN 总线可以工作在多主方式，网络上任一节点均可以在任意时刻向其他节点发送信息，从不分主从，通信方式灵活。

### 无线通讯网  

<img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105193904233.png" alt="image-20250105193904233" style="zoom:50%;" />

<img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105193654135.png" alt="image-20250105193654135" style="zoom:50%;" />

#### WIFI

Wi-Fi 由 AP 和无线网卡组成，AP 当于一个内置无线发射器的 Router，无线网卡则是负责接收由 AP 所发射信号的客户端设备。

##### 标准

Wi-Fi(Wireless Fidelity) ，即无线保真，俗称“无线宽带”，是 IEEE 定义的一个无线网络通信工业标准（IEEE802.11）

##### 范围

个域网、局域网、城域网 

##### 特点

- Wi-Fi 是一种将 PC、手机等终端设备以无线方式互相连接的 **短距离无线通信** 技术
- Wi-Fi 技术的目的是改善基于 IEEE802.11 标准的无线设备之间的 **互通性**。
- Wi-Fi 也是一个无线网络通信技术的品牌，由 Wi-Fi 联盟所持有。

##### 频段与信道

根据 IEEE 802.11 协议，WiFi 的工作频段主要是 2.4 GHz，5 GHz

- 2.4 GHz：
  - 适用协议：802.11b/g/n，其中 802.11n 支持双频工作；
  - 我国开放了 **13** 个信道
  - 工作频宽是 22MHz，子信道间隔是 5MHz；
  - 所以相邻信道的 Wi-Fi 信号之间有干扰
  - 必须至少间隔 5 个子信道才相互无干扰
- 5 GHz：
  - 适用协议：802.11a/n/ac，其中 802.11n 支持双频工作。
  - 开放了 5.8GHz 和 5.1GHz 两个频段：
  - 5.8GHz（5.725～5.850GHz）频段：含 5 个互不干扰的子信道（149，153，157，161，165)
  - 5.1GHz（5.150～5.350GHz）频段：含 8 个互不干扰的子信道（36，40，44，48，52，56，60，64）
- 频宽与扩频技术
  - 频宽是指能够有效通过该信道的信号的最大频带宽度，大小依据要传送的信息量而定。
  - 扩频技术：利用数学函数将信号功率分散至较大的频率范围。只要在接收端进行反向操作，就可以将这些信号重组为窄带信号。所有窄带噪声都会被过滤掉，因此信号可以清楚的重现。

##### 802.11 标准和分层结构

IEEE802.11 标准定义了介质访问接入控制层 MAC 和物理层 PHY。

**物理层**

为上层提供高速可靠的数据传输通道

- 提供信号载波
- 载波侦听冲突避免 CSMA/CA
- 提供接口

**数据链路层:**

   逻辑链路控制子层 LLC

   介质访问控制子层 MAC

- 以太网使用的 MAC 协议: CSMA/CD  （载波监听多路访问/冲突检测）carrier sense multiple access/collision detection

  “先听后发，边发边听，冲突停发，随机延迟后重发”

  不能应用于 WLAN 的原因：WLAN 的隐藏终端&暴露终端；大多数的无线电收发装置是半双工的，不能在发送过程中进行监听

  IEEE 802.11 采用了避免冲突的方式：CSMA/CA(Collision Avoidance 冲突避免)  由于无线介质的特殊性，介质上的信号的动态范围很广，发送站点无法确认检测到的信号是自己传输的信号还是噪声信号

  **MAC 帧分类**

  数据帧：负责将 MSDU 传输到目标站，转交给相应的 LLC 层

  控制帧：在工作站和 AP 之间建立连接并认证后提供必要的辅助功能

  ​      ---RTS 帧、CTS 帧、ACK 帧等

  管理帧：负责在工作站和 AP 间建立初始通信、提供连接或认证等

  ​      ---Probe Request/Response 帧 (主动扫描时)

  ​      ---Beacon 帧(信标帧, 被动扫描时 AP 发出)

  ​      ---ReAssociation Request / Response 帧 (从 ESS 的一个 BSS 漫游到另一个 BSS 进行重新关联，以便新 AP 联系老 AP 取得原来的关联信息)

**无线信道 MAC 层协议作用：**

   提供对共享无线介质的竞争使用和无竞争使用，如何分配无线信道资源。

##### 网络的构成

**以自组网（Ad hoc）的方式进行通信和组网**

- 自组网形式是点对点网络形态，相当于网线直连，又称无中心网络又称对等网络；
- **一组（至少两个）** 无线终端组成一个最基本服务单元(BSS), 终端具有相同权限，可直接通信。
- **优点：** 健壮性好、易建网、成本低。
- **缺点：** 终端数量多时布局复杂(不超过 15 个)

**在访问点 AP 的协调下进行通信和组网**

- **有中心网络**，又称 AP 结构化网络。
- AP 和与其关联的终端构成基本服务单元(BSS)；AP 是 BSS 的中心站，为接入有线主干网提供逻辑访问点。
- 分配系统(DS)连接不同的以 AP 为中心的 BSS，DS 的媒介与 BSS 媒介逻辑上是分开。
- **优点：** 易组网，维护容易；
- **缺点：** 健壮性差(AP 故障则全网瘫痪)，AP 的引入增加了成本

##### ESP8266 协议栈

1. **模块初始化**：程序上电运行后，在开始使用 WIFI 模块前，必须先对其进行初始化。除了 GPIO 口以及串口的初始化外，还需要对 WIFI 模块进行配置，使其工作在我们希望的模式下。
2. **连接到 AP**：调用 `ESP8266_JoinAccessPoint` 函数，输入 AP 的 SSID 和密码，连接到对应的 wifi 热点。
3. **发送数据**：发送数据过程分两步： 1.发送 AT+CIPSEND =, 命令。说明要往哪个 socket 通道，发送多少字节的数据。 2.收到 WIFI 模块返回的 "OK\r\n >" 后，再发送数据。 
4. **接收数据**：使用 Esp8266 模块时，接收网络上发来的数据，不需要 MCU 先发“接收”的“AT 指令。只要收到数据，ESP8266 就会通过“+IPD”开头的数据包，将数据传递给 MCU。代码总结：和 WIFI 模块相关的驱动由三层组成： Esp8266.c 中是对 AT 指令的实现；在 ESP8266_io.c 中，是最底层的跟 STM32 外设打交道的部分。包括初始化引脚，从串口读取和发送数据； Wifi.c 是 wifi 底层驱动和上层的一个接口。
5. AT 指令：通过串口将 AT 指令传输到 ESP8266 中去，ESP8266 便可以进行工作；包括后面的单片机控制，也是通过 AT 指令对模块进行作用。

#### zigbee 

一种专注于低功耗、低成本、低复杂度、低速率的无线网络通信技术，是为了满足小型廉价设备的无线联网和控制而提出的。

##### 802.15 工作组：802.15.1/2/3/4 

<img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105205725850.png" alt="image-20250105205725850" style="zoom:50%;" />

IEEE 802.15.4 规范满足国际标准组织（ISO）开放系统互联（OSI）参考模式，它定义了 Zigbee 的物理层和 MAC 层。网络层和应用层由 Zigbee 联盟定义。

##### 底层协议 802.15.4

ZigBee 协议栈的总体帧结构：PPDU、MPDU、NPDU、APDU

<img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105210552947.png" alt="image-20250105210552947" style="zoom:50%;" />



##### 分层结构及各子层

ZigBee 协议栈的总体架构：PHY、MAC、NWK、APS

<img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105210712427.png" alt="image-20250105210712427" style="zoom:50%;" />

**服务接入点(Service Access Point)** 每一层都可以通过 SAP 和相邻层通信：D-SAP：数据服务、M-SAP：管理服务

**应用层包括三部分：**

- 应用支持子层；
- Zigbee 设备对象 ZDO
- 厂商定义的应用对象 AppObj

**节点与端点**

每个 ZigBee 设备都被看作一个节点，每个节点有 255 个端点。

端点对应着应用层的入口，是为实现一个设备描述而定义的一组群集。每个 Zigbee 设备可以最多支持 240 个端点，即每个设备上可以定义 240 个应用对象。

端点 0 被保留用于设备对象(ZDO)接口，端点 255 被保留用于广播，端点 241～245 被保留用于将来扩展使用。

附属在端点 0 的应用对象(端点 0 负责的功能集)被称为 Zigbee 设备对象。应用程序可以通过端点 0 与 Zigbee 堆栈的其他层通信，从而实现对各层的初始化和配置。

ZDO 提供应用对象、模板和应用支持子层(APS)之间的接口，标识一类基本功能。它处在应用框架和应用支持子层(APS)之间，满足 Zigbee 协议栈中所有应用操作的公共需求。

**网络层：**

保障设备之间的组网；网络节点间的数据传输

主要作用：

- 负责网络的建立
- 允许设备加入或离开网络
- 路由的发现和维护

**IEEE802.15.4 通信层：**

**PHY：频段，信号发射与接收技术**

**MAC：无线信道的访问控制机制**

**物理层**

物理层的主要功能是在一条物理传输媒体上，实现数据链路实体之间透明地传输各种数据比特流。

PHY 物理层是离硬件最近的一层，主要任务是：激活射频、通过无线电信号收发数据包。

- 工作频段的分配

  - 868/915MHz 工作频段

    - 868MHz 为欧洲使用，1 个信道（信道 0），20kbps
    - 915MHz 为美国和澳大利亚使用，10 个信道（信道 1-10），40kbps
    - 调制方式：BPSK 调制(二进制相移键控)

  - 2.4GHz 工作频段

    - 全球统一的无须申请的 ISM 频段；
    - 提供 16 个信道（信道 11-26）；
    - 调制方式：偏移四相相移键控（ O-QPSK ）
    - 每个信道提供 250kbit/s 的传输速率；

  - 信道的分配：一共 27 个信道，2.4GHz 频段上划分了 16 个信道；915MHz 频段上有 10 个信道；868MHz 频段只有 1 个信道。

    - 关键技术 1：信道的能量检测

      1. Energy Detect：协调器在构建一个新的网络时，需要扫描所有信道，即：ED_SCAN；

      2. 然后为网络选择一个空闲的信道，这个过程在底层是借助物理信道能量检测来完成的。如果一个信道被别的网络占用，体现在信道能量上的值是不一样的。

      3. IEEE802.15.4 标准定义了与之相关的两个原语：**能量检测请求原语（PLME_ED.request）** 和 **能量检测确认原语（PLED-ED.confirm）**。 

      4. ```c
         /*
         * This function allows the next higher layer to request an energy scan to evaluate channels in the local area.
         */
         extern ZStatus_t NLME EDScanRequest( uint32 ScanChannels, uint8 scanDuration); 
         /*
         This function returns list of energy measurements.
         */
         extern void NLME_EDScanConfirm( uint8 status, uint32 scannedChannels, uint8 *energyDetectList ); 
         ```

         

    - 关键技术 2：链路质量指示（LQI）

      1. LQI（Link Quality Indicator)：高层的协议往往需要依据底层的链路质量来选择路由，物理层在接收一个报文的时候，可以顺带返回当前的 LQI 值；

      2. 物理层主要通过底层的射频硬件支持来获取 LQI。MAC 软件产生的 LQI 值可以用信号接收强度指示器(RSSI)来表示。

      3. ```c
         /**************************************************************************
          * @fn  macRadioComputeLQI 
          * 
          * @brief Compute link quality indication. 
          *
          * @param rssi - raw RSSI value from radio hardware
          *        corr - correlation value from radio hardware
          * 
          * @return link quality indicator value
          **************************************************************************
          */
         MAC INTERNAL API uint8 macRadioComputeLQI(int8 rssiDbm, uint8 corr) 
         ```

    - 关键技术 3：空闲信道评估 CCA：Clear Channel Assessment；

      1. 由于 802.15.4 标准的 MAC 子层采用的是 CSMA/CA 机制访问信道，需要探测当前的物理信道是否空闲，物理层提供的 CCA 检测功能就是专门为此而定义的。此功能定义的两个与之相关的原语为：CCA 请求原语(PLME-CCA.request)与 CCA 确认原语(PLME-CCA.confirm)。
      2. CCA 请求原语由 MAC 子层产生，语法为：PLME-CCA.request()，是一个无参的请求原语，用于向物理层询问当前的信道状况。

  - 为 MAC 层提供数据服务：数据服务访问接口 PD-SAP，为物理层和 MAC 层之间提供数据服务。“收发数据”

  - 为 MAC 层提供管理服务：管理服务访问接口，PLME-SAP，为物理层和 MAC 层之间传输管理服务，维护物理层 PAN 信息库；比如进行一些参数配置，或读取状态。“控制信息”

**数据链路 MAC 层**

物理层负责无线信道的分配，而 MAC 层负责无线信道的使用方式，它们是构建 Zigbee 协议底层的基础。

IEEE802 系列标准把数据链路层分成逻辑链路控制 LLC 子层和介质接入控制 MAC 两个子层，这也适用于 ZigBee 协议。

- LLC 子层在 IEEE802.6 标准中定义，为 802 标准系列所共用；LLC 子层进行数据包的分段与重组以及确保数据包按顺序传输。
- MAC 子层协议则依赖于各自的物理层，为两个 ZigBee 设备的 MAC 层实体之间提供可靠的数据链路。

主要功能：

1. 采用带有冲突避免的载波侦听多路访问(CSMA/CA)机制来访问信道。
2. PAN(Personal Area Network，个域网)的建立和维护；支持 PAN 网络的关联(即加入网络)和解除关联(退出网络)。
   - main()-> osal_init_system()-> osalInitTasks()-> ZDApp_Init()
   - <img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105214934737.png" alt="image-20250105214934737" style="zoom:50%;" />
3. 协调器产生网络信标帧，普通设备根据信标帧与协调器同步。
4. 处理和维护保证 GTS(Guaranteed Time Slot，同步时隙)。

MAC 帧特定格式包括信标帧、数据帧、确认帧和命令帧。

<img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105215349132.png" alt="image-20250105215349132" style="zoom:50%;" />

**信标帧有效载荷** 由四部分组成，即 **超帧配置、GTS、待处理地址和信标有效载荷**。

超帧将通信时间划分为 **活跃** 和 **不活跃** 两个部分。

在不活跃部分，PAN 网络中的设备不会相互通信，从而可以 **进入休眠状态** 以节省能量。

超帧的活跃期间划分为三个阶段：信标帧发送时段、竞争访问时段（CAP）和非竞争访问时段（CFP，在保证时系 GTS 范围内不用竞争，每个设备分得一个 GTS）。

超帧的活跃部分被划分为 16 个等长的时槽，**每个时槽的长度、竞争访问时段** 包含的时槽数等参数，都由协调器设定，并通过超帧开始时发出的信标帧广播到整个网络



##### 特点

ZigBee 的技术特点：是一种短距离、低功率、低速率无线接入技术

- 短距离：有效覆盖范围在 10～75m 之间
- 低功耗：两节五号电池可使用 6~24 个月
- 低速率：数据传输速率低，工作在 20~250kbps
- 低成本：对通信控制器的要求低，免协议专利费
- 大容量：每个 ZigBee 网络最多可支持 255 个设备

##### 网络中的三类节点及工作流程

一个典型的 ZigBee 网络中，包含三种类型的节点：协调器，路由器，终端设备。

1）协调器：一个 ZigBee 个人局域网（PAN）网络有且仅有一个协调器，负责网络启动，配置网络信道和 PAN ID，成员地址分配，节点绑定、建立安全层等。

2）路由器：也叫全功能设备 FFD，可以和任何设备通信；允许设备加入网络，扩展网络覆盖的物理范围、数据包路由功能

3）终端设备：也叫精简功能设备 RFD，ZigBee 网络边缘设备，不具备协调器和路由器的能力。

##### 三类网络拓扑结构

一个典型的 ZigBee 网络中，支持星型、树形和网状网络拓扑结构。

1）星状网络：由一个协调器节点和一个或多个终端设备组成。

- 所有的终端设备只和协调器之间进行通信；
- 协调器作为发起设备，协调器一旦被激活，它就建立一个自己的网络，并作为 PAN 协调器，PAN ID。
- 路由设备和终端设备可以选择 PAN 标识符加入网络。

2）树形网络：由一个协调器和多个星型结构连接而成。

- 设备除了能与自己的父节点或子节点互相通信外，其他只能通过网络中的树型路由完成通信；
- 在树型网络中，由协调器发起网络，路由器和终端设备加入网络。

3）网状网络：类似树状网络，在树型网络的基础上实现。

- 与树状网络不同的是，它允许网络中所有具有路由功能的节点互相通信，由路由器中的路由表完成路由查寻过程；
- 在网状型网络中，每个设备都可以与在无线通信范围内的其他任何设备进行通信。

##### 路由协议

**树形路由协议**

- 协调器为树的根结点
- 路由结点为树枝
- 树形路由机制包括
  - 配置树形地址
  - 基于树形地址的路由

**建立过程：**

协调器建立起一个新的网络，自己地址 0，网络深度 d~0~= 0

如果结点 i 想要加入网络，与结点 k 连接，那么结点 k 为结点 i 的父结点。

结点 k 根据自身地址 A~k~和网络深度 d~k~，为结点 i 分配网络地址 A~i~和网络深度 d~i~（d~i~= d~k~+1）。

L~m~：网络的最大深度

C~m~：每个父结点最多可以拥有的子结点数

R~m~：C~m~个子结点中最多允许有 Rm 个路由结点

 C~skip~(d)：网络深度为 d 的父结点为子结点分配地址时，子结点地址之间的偏移量
$$
C_{skip}(d) =\begin{align}
\left\{     %在 equation 环境下使用，用\left\{命令添加左大括号，用\right.以打点.结束
	\begin{gathered}
	1+C_m(L_m-d-1) &, 如果 R_m = 1\\
	\frac{1+C_m-R_m -C_m  \times R_m^{L_m-d-1}}{1-R_m} &, 其他情况
	\end{gathered}
\right.
\end{align}
$$

- 如果一个路由结点的 C~skip~(d)大于 0，则它可以接纳子结点，为子结点分配地址
- 第一个路由子结点地址比父结点大 1
- 其他路由子结点的地址，与前一个地址之间都相隔 C~skip~(d)

如果新的子结点 i 作为非路由节点，它作为结点 k 的第 n 个终端子结点。网络地址为
$$
A_i = A_k+C_{skip}(d) \times R_m +n
$$


如果新的子结点具有路由能力，它作为结点 k 的第 n 个路由子结点，网络地址为
$$
A_i = A_k +1+C_{skip}(d) \times(n-1)
$$

**网状路由协议**

AODVjr 是一种简化版本的 AODV（Ad hoc 按需平面距离向量路由协议）

1. **路由请求（Route Request, RREQ）**：

   - 当源节点需要发送数据到目的节点，但其路由表中没有目的节点的路由信息时，源节点会生成一个 RREQ 消息。
   - RREQ 消息包含源节点和目的节点的地址、序列号等信息，并通过广播的方式在网络中传播。
   - 中间节点接收到 RREQ 后，会检查其路由表中是否有目的节点的路由信息。如果有，且序列号比 RREQ 中的序列号更新，则生成路由回复（Route Reply, RREP）消息。

2. **路由回复（Route Reply, RREP）**：

   - 中间节点或目的节点生成 RREP 消息，并沿着 RREQ 的反向路径返回给源节点。
   - RREP 消息中包含了从目的节点到源节点的路由信息。

3. **路由建立**：

   - 源节点接收到 RREP 后，根据其中的路由信息建立到目的节点的路由。
   - 如果在路由发现过程中遇到路由错误（如节点断开连接），则会生成路由错误（Route Error, RERR）消息，通知相关节点进行路由更新。

   <img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250106204557509.png" alt="image-20250106204557509" style="zoom:50%;" />

   <img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250106204640117.png" alt="image-20250106204640117" style="zoom:50%;" />

#### 蓝牙

##### **特点**

- 工作在 2.4GHz ISM（即工业、科学、医学）频带
- 可以在 10-100 米的短距离内无线传输数据
- 可以支持 1Mbps、4Mbps、8Mbps 和 12Mbps 等多种传输速度
- 各种蓝牙设备无论在任何地方，都可以通过查询来发现其它蓝牙设备，从而构成网络
- 标准 IEEE 802.15.1 和 IEEE 802.15.2

##### 优势

- 组建 **蓝牙微微网（Pico 皮可网）**，一个 **主设备** 与多个 **从设备** 通信
- 采用 **跳频技术**
- 认证和加密功能，保证链路层的安全
- 采用电路交换和分组交换技术，即能同时传输语音和数据信息，支持异步数据信道、以及异步数据与同步语音传输的信道
- 设置 **呼吸模式、保持模式、休眠模式** 降低功耗

##### 组网

在通信的过程中，设备分为 **主设备（Master）** 和从 **设备（Slave）** 两个角色

蓝牙支持点到点和点到多点的连接，一个主设备最多可以同时与 **7 个从设备** 进行通信，信道特性由主设备所决定

主、从设备之间以 **轮询** 的调度方式

- 主设备启动发送过程，传送数据给从设备，或是询问从设备是否有数据
- 从设备回应是否收到主设备发送的数据，或发送数据给主设备。
- 没有被轮询到的从设备则不被允许传送数据

同一个微微网内的 2 个从设备之间的通信，**必须经过主设备进行中转**

可以通过共享设备把 **多个微微网连接** 起来，形成 **散射网**（Scatter Net，扩散网）但每个设备同时只能在一个微微网中进行通信。

蓝牙设备可以充当 **多重角色**，可以作为主设备又可以作为从设备，还可以同时兼作主、从设备

但是不可能在两个微微网中充当主设备，连接两个或两个以上散射网的结点称为桥结点/网关结点。

从从桥：在两个网络中都充当从设备

主从桥：在一个网络中充当主设备，在另一个网络中充当从设备

<img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250106211608829.png" alt="image-20250106211608829" style="zoom:33%;" />

**时分双工**

​	蓝牙采用时分双工（TDD）将信道的时间轴分为时隙，发射和接收信号是在信道的不同时隙中进行的。**625 微秒** 为蓝牙的一个时隙。更准确的说是同步半双工，因为时隙很短，所以感觉不出半双工的情况。

- 主设备总是以 **偶数** 时隙启动传输工作
- 从设备则总是从 **奇数** 时隙启动传输工作
- 一个数据包在名义上占用一个时隙，但实际上可以被扩展到占用 5 个时隙

**跳频技术**

跳变频率（Frequency Hopping，FH）即使是在单一连接的情况下，蓝牙也会不断“跳变”，跳频频率为 **1600 跳/秒**，每个时隙从 **79 个信道** 中选 1 个，**时隙长度 625 微秒**。是扩频技术的一种，也属于一种硬件加密手段。

散射网便是依靠跳频码序列来识别每个微微网的。

## **第三章 无线传感网**

概念：无线传感器网络（WSN），简称无线传感网，是一种通过大量低成本、资源受限的传感节点协同工作，实现某一特定任务的多跳自组织网络。

作用：主要用于周边环境温度、灯光、湿度等参数感知与监控，大气污染程度的监测，建筑结构的完整性检测，家庭环境情况监控，机场、商场、体育馆等公共场所化学、生物威胁的检测与预报等方面。

### 传感网的组成

- 传感器节点（ Sensor ）：随机分布自组织构成网络，感知环境信息，多跳路由到汇集节点。数据链路：由监测区域中的部分节点组成，直接将数据传送至 Sink，最终传送到监控中心。
- 汇集节点（Sink）（网关/基站）：是网络协调员，负责监控中心认证和消息缓冲，并连接有线以太网络；同时将接收到的数据进行融合、压缩及异构互联；最后通过 Internet、卫星通信、移动通信等方式传送到监控中心。
- 管理节点（监控中心）：对数据进一步加工、分析、处理和显示；同时，用户也可以通过监控中心发布控制命令，通知传感器节点收集指定区域的监测信息。

###  传感网的系统结构

3 个模块组成：由网络通信协议模块、传感网管理模块、应用支撑技术模块。

传感器协议栈包括物理层、数据链路层、网络层、传输层和应用层，与互联网协议栈的五层协议相对应，同时还包括能量管理平台、移动管理平台和任务管理平台。

![image-20250105135826559](./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105135826559.png)

![image-20250105135832654](./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105135832654.png)

### 定位技术

定义：利用传感器网络中少量预先设置的已知位置的节点（信标节点，）来获得其它大量未知位置节点（未知节点）的位置信息。

特点：信标节点根据自身位置建立本地坐标系，未知节点根据信标节点计算出自己在本地坐标系里的相对位置——即自定位。

- 到达时间差法（TDOA）：在基于到达时间差 TDOA 的定位机制中，发射节点同时发射两种不同传播速度的无线信号，接收节点根据两种信号到达的时间差以及已知这两种信号的传播速度，计算两个节点之间的距离，再通过已有基本的定位算法计算出节点的位置。
- 接收信号强度法（RSSI）：在基于接收信号强度指示 RSSI 的定位中，已知发射节点的发射信号强度，接收节点根据收到信号的强度，计算出信号的传播损耗，利用理论和经验模型将传输损耗转化为距离，再利用已有的算法计算出节点的位置。
- 到达角度法（AOA）：在基于到达角度 AOA 的定位机制中，接收节点通过天线阵列或多个超声波接收机感知发射节点信号的到达方向，计算接收节点和发射节点之间的相对方位或角度，再通过三角测量法计算出节点的位置。

#### 基于距离自定位 3 种常用算法

- 三边测量定位方法
- 三角测量定位方法
- 极大似然估计法

#### 定位技术名词

- 邻居节点（neighbor node）
- 跳数（hop count）
- 跳段距离（hop distance）
- 基础设施（infrastructure）
- 到达时间（Time Of Arrival，TOA）
- 到达时间差（Time Difference Of Arrival，TDOA）
- 接收信号强度指示（Received Signal Strength Indicator，RSSI）
- 到达角度（Angle Of Arrival，AOA）
- 视线关系（Line of Sight，LOS）
- 非视线关系（No LOS，NLOS）

### 时间同步技术

时间同步：使传感器网络各节点的时钟保持同步。

在传感器网络中主要有以下 3 个原因导致传感器节点间时间的差异：

- 节点开始计时的初始时间不同。
- 每个节点的石英晶体可能以不同的频率跳动，引起时钟值的逐渐偏离，称为偏移误差。
-  随着时间推移，时钟老化或随着环境温度变化而导致时钟频率的变化，称为漂移误差。

**网络时间协议 NTP**

### 数据融合技术

#### 概念

就是将采集的大量随机、不确定、不完整、含有噪音的数据，进行整形、滤波等处理，得到可靠、精确、完整数据信息的过程。

#### 分类

<img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105150708694.png" alt="image-20250105150708694" style="zoom:50%;" />

#### 基本融合方法

- 综合平均法
- 卡尔曼滤波法
- 贝叶斯估计法
- D-S 证据推理法
- 统计决策理论
- 模糊逻辑法
- 产生式规则法
- 神经网络方法

### 网络安全技术

WSN 与安全相关的特点

- 资源受限，通信环境恶劣
- 部署区域的安全无法保证，节点容易失效
- 网络无基础框架
- 地理位置具有不确定性

WSN 的安全需求：主要表现在通信和信息两个方面

- 通信安全需求
  - Sensor 节点的抗篡改能力
  - 抵御入侵能力
  - 反击入侵能力
- 信息安全需求
  - 数据机密性
  - 数据鉴别
  - 数据完整性
  - 数据时效性

<img src="./%E7%89%A9%E8%81%94%E7%BD%91%E7%AC%94%E8%AE%B0.assets/image-20250105152005898.png" alt="image-20250105152005898" style="zoom:50%;" />

### 能源管理

#### 意义

​    在无线网络通信中，由于无线传感器网络的节点体积小，发送端和接收端都贴近地面，干扰较大，障碍物较多, 随着通信距离的增加，能耗急剧增加。通常为了降低能耗，应尽量减小单跳通信距离。简单地说，多个短距离跳的数据传输比一个长跳的传输能耗会低些。因此，在传感器网络中要减少单跳通信距离，尽量使用多跳短距离的无线通信方式。

#### 节能方法

   **(1)休眠机制**

​    休眠机制的主要思想是，当节点周围没有感兴趣的事件发生时，计算与通信单元处于空闲状态，把这些组件关掉或调到更低能耗的状态，即休眠状态。

   **(2)数据融合**

​    数据融合的节能效果主要体现在路由协议的实现上。路由过程的中间节点并不是简单的转发所收到的数据，由于同一区域内的节点发送的数据具有很大的冗余性，中间节点需要对这些数据进行数据融合，将经过本地融合处理后的数据路由到汇聚点，只转发有用的信息。数据融合有效地降低了整个网络的数据流量。

​    LEACH 路由协议就具有这种功能，它是一种自组织的在节点之间随机分布能量负载的分层路由协议。

### S-MAC 协议

  这里介绍一种适用于无线传感器网络的比较典型的 MAC 协议，即 S-MAC 协议(Sensor MAC)。这种协议是在 802.11 MAC 协议的基础上，针对传感器网络的节省能量需求而提出的。

  S-MAC 协议的适用条件是传感器网络的数据传输量不大，网络内部能够进行数据的处理和融合以减少数据通信量，网络能容忍一定程度的通信延迟。它的设计目标是提供良好的扩展性，减少节点能耗。

  通常无线传感器网络的无效能耗主要来源于如下四种原因：

- ​    空闲监听
-    数据冲突
-    串扰
-    控制开销

解决机制：

（1）周期性侦听和睡眠机制

（2）流量自适应侦听机制

（3）冲突和串音避免机制

（4）消息传递机制

## 材料题

三实验取一

看代码写操作

> 代码填空？

低频卡实验

高频卡实验

zigbee 点对点实验