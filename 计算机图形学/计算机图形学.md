# 计算机图形学

## 题型及范围

- 选择 20
- 填空 10
- 判断 10
- 简答 20-30
- 程序填空 10
- 综合 30



- [x] 程序填空：几何变换，填写变换矩阵
- [x] 填空：光照命令，不需要记参数
- [x] 综合题：
   - [x] 纸质作业：ET 表和 AET 表
   - [x] [开放性问题](#开放性问题)：什么是 **AICG**，论述其应用场景和研究领域；并换取其中一个领域对比，分析传统 CG 和 AICG 的区别；使用 AICG 需要具备哪些素质？
- [x] 简答 7 个
   - [x] 什么是光照模型和它的分类
      1. 简单光照模型
      2. 整体光照模型
   - [x] 什么是投影变换，为什么要进行投影变换？
      - 要显示在二维屏幕上
   - [x] 中点画线法的核心思想
      - 划线时根据中间距离取像素位置
   - [x] 举例说明透视投影现象
      - 行道树
      - 平行道路
   - [x] 裁剪是什么；裁剪的对象是什么？
      - 将视区外的裁剪掉，只显示视区内的图形
      - 点、线段、圆弧段、多边形、字符以及它们构成的图形
   - [x] 什么是消隐？按照消隐对象可以分为那两种消隐？
      - 物体后面部分的轮廓线和表面被前面部分遮挡可见，将隐藏先和隐藏面消除的操作是消隐
      - 线、面
   - [x] 讲一下 深度缓冲器算法的思想
      - 双 buffer
      - 更替
- [x] 选择判断
   - [x] 齐次坐标
   - [x] 几何变换（二维）：五种基础变换，复合变换，仿射变换
   - [x] 几何建模坐标系
   - [x] 光滑明暗处理
      - flat 快速明暗处理
      - gouraud 明暗处理
      - Phong明暗处理
   - [x] 裁剪 科恩-桑德兰算法的原则 
      - 视区编码为 0000
   - [x] 扫描线算法
   - [x] 投影 分类：正投影 斜投影 正等测正一测正二测正三测
   - [x] 纹理：按照表现形式分类
      - 过程纹理
      - 几何纹理
      - 颜色纹理
   - [x] 颜色模型
   - [x] 画家算法的思想

## 第一章 绪论和图形系统

### 绪论

#### 计算机图形学的定义

计算机图形学：研究通过计算机将信息数据转换为图形，并在专门显示设备上显示的原理、方法和技术的学科。

#### CG 的目标

视觉交流。通过图形或几何的方式来表示或展示一些问题或信息。

#### CG 的基本任务

- 表示：将客观世界用二维或三位的方式表示。
- 交互：通过计算机输入、输出设备，易有效的方式实现表示与绘制的技术
- 如何将计算机中的对象用一种只管形象的图形图像方式表现出来

**图形表示方式**

- 点阵法：枚举出图形中所有的点来表示图形，图形由点及点的属性（颜色）构成，也称点阵图形。
- 参数法：也称为矢量图形，包括形状参数：方程或分析表达式的系数，线段的端点坐标等；属性参数：灰度、色彩、线性等非几何属性。

#### CG 相关学科

**图形与图像**

- 图形：由点、线、面以及三维空间所表示的几何图形
- 图像：指各种图片、画图、照片及光学影像，是客观世界通过光学系统产生的视觉映像。

![image-20250107115032850](./%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6.assets/image-20250107115032850.png)

#### CG 应用领域

- CAD&CAM：计算机辅助设计与制造
- 信息可视化
- 科学计算可视化
- 医学可视化
- 虚拟现实
- 动画
- 三维重建

#### 发展

- 诞生：1950-1960
- 线框图形学：1960-1970
- 光栅图形学：1970-1980
- 真实感图形学：1980-1990
- 实时图形学：1990-

**发展趋势**

基于 GPU 的图形硬件技术，三维建模，动态仿真

### 图形系统

#### 组成

- 硬件系统：主机、显示器、各种输入输出设备
  - 图形硬件 = 输入+CPU+内存+帧缓存+输出
- 软件系统：
  - 应用软件：解决某种应用问题的图形软件（AutoCAD、Maya）
  - 支持软件：有一组工业的图形子程序组成的。扩展了系统中原有高级语言和操作系统的图形处理功能（OpenGL、DirectX、Java3D 等）
  - 图形应用数据机构：一组图形数据文件，其中存放 着要生成的图形对象的全部描述信息。
- 用户

#### 分类

- 用于图形工作站的图形系统：配置大容量的内存和硬盘等，功能强大
- 用于 PC 机的图形系统：体积小，价格低，用户界面友好
- 嵌入式图形系统

#### 体系结构

图形系统中，有一个特别的软硬件子系统，能高效绘制出透视图中的 **三维图元**，这就是图形系统的核心结构——图形系统体系结构，也称 **图形流水线**。

- 应用程序阶段：把数据易图像形式提供给图形硬件，该阶段是通过软件方式实现的。
- 几何处理阶段：以顶戴那位基础对几何图元进程处理，并从三维坐标变换为二维屏幕坐标的过程。
- 像素处理阶段：

## 区域填充

扫描线算法(有序边表填充算法)：按照扫描线顺序计算与多边形相交的区间，再用要求颜色填充相交区间

### 步骤

- 求交：计算该扫描先与多边形各边的交点。
- 排序：把所有交点按 x 值递增顺序排序
- 配对：将第 1、2 个，第 3、4 个等交点配对，每对交点代表扫描线与多边形的一个相交区间
- 填色：把每一相交区间内的所有像素置成多边形颜色，把相交区外的像素置成背景色

出现奇数个点：

如果该点是极值点，计为 0 个或两个点；如果是非极值点，计为 1 个点。

- 活动边 AE：与当前扫描先有交点的边
- 边表 ET：
- 活动边表 AET：按照 x 坐标递增顺序放在一个链表中作为活动边表的项

- $y_{max}$：该边最大的 y 坐标值
- $x_{min}$：该边 y 值最小端点的 x 坐标
- $1/k$：该边斜率 k 的倒数

### 算法步骤

1. 初始化 ET：按照各边 y~min~的值存放
2. 初始化 AET 为空表
3. 将 y 设为 ET 中的最小 y 值

<img src="./%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6.assets/image-20250107214640123.png" alt="image-20250107214640123" style="zoom:50%;" />

<img src="./%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6.assets/image-20250107214631381.png" alt="image-20250107214631381" style="zoom:50%;" />

<img src="./%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6.assets/image-20250107214658341.png" alt="image-20250107214658341" style="zoom: 50%;" />





## 第四章 图形几何变换

- 图形变换：图形的几何信息经过变换后产生新的图形
- 变换的实质是改变坐标位置。

### 图形变换的表示

由于图形的点集可以用矩阵方式来表达，因此，图形变换也可通过 **矩阵运算** 来实现，即：
$$
原图形点集矩阵 \times 变换矩阵 \stackrel{矩阵运算}\Longrightarrow 新图形点集矩阵
$$

### 变换的数学基础

#### 齐次坐标

使用 n+1 维向量表示 n 维向量。n 维向量 $(p_1,p_2,...,p_n)$ 表示为 $(hp_1,hp_2,...,hp_n,h)$。h 称为 **哑坐标**，h = 1 时该向量称为 **规格化坐标**。

#### 基本的二维几何变换

- 平移变换（相对于坐标原点）
- 比例变换（相对于坐标原点）
- 旋转变换（相对于坐标原点）
- 对称变换（相对于坐标轴）
- 错切变换（相对于坐标轴）

##### **变换通式（仿射变换）**

五种基本变换可用统一的变换通式（仿射变换来表示）：
$$
\begin{bmatrix}
x'&y'& H
\end{bmatrix}
=
\begin{bmatrix}
x &y& 1
\end{bmatrix}\cdot T
$$

统一变换矩阵应为 3×3 阶矩阵，即：
$$
T =\left[\begin{array}{cc: c}
a&b&p\\
c&d&q\\
\hdashline
k&m&s
\end{array}\right]
$$

- a、b、c、d 用于比例缩放、对称错切、旋转等
- k、m 用于平移变换
- p、q 用于透视变换（投影变换）
- s 用于全比例变换（总体比例变换）

##### 平移变换矩阵

<img src="./%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6.assets/image-20250107150426509.png" alt="image-20250107150426509" style="zoom:33%;" />
$$
\begin{bmatrix}
x&y&1\\
\end{bmatrix}
\begin{bmatrix}
1&0&0\\
0&1&0\\
k&m&1\\
\end{bmatrix}=
\begin{bmatrix}
x+k&y+m&1\\
\end{bmatrix}=
\begin{bmatrix}
x'&y'&1\\
\end{bmatrix}
$$

##### 比例（缩放变换矩阵）

<img src="./%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6.assets/image-20250107150506695.png" alt="image-20250107150506695" style="zoom:33%;" />
$$
\begin{bmatrix}
x&y&1\\
\end{bmatrix}
\begin{bmatrix}
a&0&0\\
0&d&0\\
0&0&1\\
\end{bmatrix}=
\begin{bmatrix}
ax&dy&1\\
\end{bmatrix}=
\begin{bmatrix}
x'&y'&1\\
\end{bmatrix}
$$
**全比例缩放**
$$
\begin{bmatrix}
x&y&1\\
\end{bmatrix}
\begin{bmatrix}
1&0&0\\
0&1&0\\
0&0&s\\
\end{bmatrix}=
\begin{bmatrix}
x&y&s\\
\end{bmatrix}=
\begin{bmatrix}
x/s&y/s&1\\
\end{bmatrix}
$$

##### 旋转变换矩阵

$$
\begin{bmatrix}
x&y&1\\
\end{bmatrix}
\begin{bmatrix}
cos\theta&sin\theta&0\\
-sin\theta&cos\theta&0\\
0&0&s\\
\end{bmatrix}=
\begin{bmatrix}
xcos\theta-ysin\theta&xsin\theta+ycos\theta&1\\
\end{bmatrix}=
\begin{bmatrix}
x'&y'&1\\
\end{bmatrix}
$$

##### 对称变换矩阵

$$
关于 x 轴对称：\begin{bmatrix}
1&0&0\\
0&-1&0\\
0&0&1\\
\end{bmatrix}\\
关于 y 轴对称：\begin{bmatrix}
-1&0&0\\
0&1&0\\
0&0&1\\
\end{bmatrix}\\
关于原点对称：\begin{bmatrix}
-1&0&0\\
0&-1&0\\
0&0&1\\
\end{bmatrix}\\
关于 y = x 直线对称：\begin{bmatrix}
0&1&0\\
1&0&0\\
0&0&1\\
\end{bmatrix}\\
关于 y =-x 直线对称：\begin{bmatrix}
0&-1&0\\
-1&0&0\\
0&0&1\\
\end{bmatrix}\\
$$

##### 错切变换矩阵

<img src="./%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6.assets/image-20250107152018713.png" alt="image-20250107152018713" style="zoom:33%;" />

<img src="./%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6.assets/image-20250107152050822.png" alt="image-20250107152050822" style="zoom:33%;" />
$$
沿 x 轴方向错切：
\begin{bmatrix}
x&y&1\\
\end{bmatrix}
\begin{bmatrix}
1&0&0\\
c&1&0\\
0&0&1\\
\end{bmatrix}=
\begin{bmatrix}
x+cy&y&1\\
\end{bmatrix}=
\begin{bmatrix}
x'&y'&1\\
\end{bmatrix}(c\not = 0)\\
沿 y 轴方向错切：\begin{bmatrix}
x&y&1\\
\end{bmatrix}
\begin{bmatrix}
1&b&0\\
0&1&0\\
0&0&1\\
\end{bmatrix}=
\begin{bmatrix}
x&y+bx&1\\
\end{bmatrix}=
\begin{bmatrix}
x'&y'&1\\
\end{bmatrix}(c\not = 0)
$$

#### 复合变换

复合变换是指由多个基础变换组合而来，变换矩阵比较复杂。可以写成多个基础变换矩阵的乘法形式。**注意**：矩阵的乘法不满足交换律，应当注意变换矩阵的顺序。

#### 三维几何变换

与二维几何变换类似，可以写出三维几何变换通式及变换矩阵：
$$
\begin{align}
\begin{bmatrix}
x'&y'& z'& H
\end{bmatrix}
&=
\begin{bmatrix}
x &y&z& 1
\end{bmatrix}\cdot T \\
T&=\left[\begin{array}{ccc: c}
a&b&c&p\\
d&e&f&q\\
h&i&j&r\\
\hdashline
l&m&n&s
\end{array}\right]
\end{align}
$$

- 左上 3*3 子块实现比例、对称、旋转、错切
- 左下 1*3 子块实现平移
- 忧伤 3*1 子块实现投影变换
- 右下角 1*1 子块实现总体比例变换

##### 变换矩阵

$$
平移变换：\begin{bmatrix}
1&0&0&0\\
0&1&0&0\\
0&0&1&0\\
l&m&n&1
\end{bmatrix}\Rightarrow\begin{bmatrix}x+l&y+m&z+n&1\end{bmatrix}\\
比例变换：\begin{bmatrix}
a&0&0&0\\
0&e&0&0\\
0&0&j&0\\
0&0&0&1
\end{bmatrix}\Rightarrow\begin{bmatrix}ax&ey&jz&1\end{bmatrix}\\
绕 x 轴旋转变换：\begin{bmatrix}
1&0&0&0\\
0&cos\theta&sin\theta&0\\
0&-sin\theta&cos\theta&0\\
0&0&0&1
\end{bmatrix}\\
绕 y 轴旋转变换：\begin{bmatrix}
cos\theta&0&-sin\theta&0\\
0&1&0&0\\
sin\theta&0&cos\theta&0\\
0&0&0&1
\end{bmatrix}\\
绕 z 轴旋转变换：\begin{bmatrix}
cos\theta&sin\theta&0&0\\
-sin\theta&cos\theta&0&0\\
0&0&1&0\\
0&0&0&1
\end{bmatrix}\\
沿 x 轴方向错切：\begin{bmatrix}
1&0&0&0\\
d&1&0&0\\
h&0&1&0\\
0&0&0&1
\end{bmatrix}\Rightarrow\begin{bmatrix}x+dy+hz&y&z&1\end{bmatrix}\\
沿 y 轴方向错切：\begin{bmatrix}
1&b&0&0\\
0&1&0&0\\
0&i&1&0\\
0&0&0&1
\end{bmatrix}\Rightarrow\begin{bmatrix}x&bx+y+iz&z&1\end{bmatrix}\\
沿 y 轴方向错切：\begin{bmatrix}
1&0&e&0\\
0&1&f&0\\
0&0&1&0\\
0&0&0&1
\end{bmatrix}\Rightarrow\begin{bmatrix}x&y&ex+fy+z&1\end{bmatrix}\\
$$

- 关于 X 轴对称: x 不变，y、z 相反
- 关于 Y 轴对称: y 不变，x、z 相反
  关于 Z 轴对称: z 不变，x、y 相反
- 关于坐标原点对称: x、y、z 相反
- 关于 XOY 平面对称: x、y 不变，z 相反
- 关于 XOZ 平面对称: x、z 不变，y 相反
- 关于 YOZ 平面对称: y、z 不变，x 相反

#### 图形几何变换的模式

- 固定坐标系模式（图形模式）：图形改变，坐标系不变，先调用的矩阵放在左边，多用于绘图的情况下
- 活动坐标系模式（空间模式）：图形不变，坐标系改变，先调用的矩阵放在右边，多用于做独立的局部变换时

## 第五章 投影变换

### 为什么要投影

将三维图形显示在二维平面的显示器上

### 分类

![投影_1736259948323](./%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9B%BE%E5%BD%A2%E5%AD%A6.assets/%E6%8A%95%E5%BD%B1_1736259948323.svg)

## 第八章 真实感图形

### 光照模型

#### 定义

模拟物体表面的光照物理现象的数学模型。

也称为明暗模型，根据光学物理中的有关定律，计算出景物表面上任一点投向观察者眼中的光亮度的大小和色彩组成的表达式，从而在显示器上生成真实感图形。

#### 简单光照模型

也称局部光照模型。只考虑光源的直接照射，光在物体之间的传播效果笼统地模拟为环境光。

#### 整体光照模型

可以处理物体之间光照关系的模型，考虑了环境的漫反射、镜面反射和规则投射对景物表面产生的整体照明效果。

## 开放性问题

什么是 **AICG**，论述其应用场景和研究领域；并换取其中一个领域对比，分析传统 CG 和 AICG 的区别；使用 AICG 需要具备哪些素质？

### AICG 的定义

AICG 是人工智能与计算机图形学（Artificial Intelligence and Computer Graphics）的结合。它利用人工智能技术在计算机图形学领域进行图像、视频和动画的合成、识别和处理。AICG 是一个重要的交叉领域，近年来受到了越来越多的关注和研究。

### AICG 的应用场景

- **影视制作**：AICG 可以用于生成逼真的视觉效果，帮助电影和电视剧制作中实现复杂的场景和特效。例如，在电影《复仇者联盟》系列中，AICG 技术的应用使得英雄的动作更加逼真。
- **游戏开发**：AICG 可以帮助创建更加逼真的游戏场景和角色模型，提高游戏的沉浸感和流畅度。此外，还可以用于游戏中的智能 NPC 设计。
- **虚拟现实和增强现实**：AICG 可以创建更加逼真的虚拟环境，增强用户的沉浸感和真实感。在 VR 和 AR 中，AICG 可以用于交互设计和手势识别。
- **建筑设计**：AICG 可以用于建筑模型的设计和展示，帮助设计师快速生成和优化建筑方案。
- **医学图像处理**：AICG 可以用于医学图像的分析和处理，帮助医生进行诊断和研究。

### AICG 的研究领域

- **机器学习和深度学习**：研究如何利用机器学习和深度学习技术来提高图像和视频生成的质量。
- **计算机视觉**：涉及图像识别、特征提取和图像合成等研究。
- **虚拟现实和增强现实**：研究如何在 VR 和 AR 中应用 AICG 技术，以实现更自然的交互和更逼真的体验。
- **智能交互与人机交互**：研究如何通过 AICG 提高人机交互的自然性和效率。

### AICG 与传统 CG 的对比

以影视制作为例：

- **效率**：传统 CG 需要大量的人工设计和建模，耗时较长。而 AICG 可以通过机器学习算法自动生成图像和动画，大大提高了制作效率。
- **成本**：传统 CG 制作成本较高，需要专业的艺术家和技术人员。AICG 可以降低人力成本，减少制作时间和资源消耗。
- **创造力**：传统 CG 依赖于艺术家的创意和技术能力。AICG 可以提供更多的创意选择和可能性，艺术家可以专注于创意表达。
- **质量**：AICG 生成的图像和动画可以非常逼真和细致，甚至达到难以区分于真实的效果。然而，传统 CG 在某些复杂场景和细节处理上仍然具有独特的优势。

### 使用 AICG 需要具备的素质

- **技术能力**：需要掌握机器学习、深度学习和计算机图形学等相关技术。
- **创新能力**：能够结合 AICG 技术进行创新，开发新的应用场景和解决方案。
- **跨学科知识**：了解相关领域的知识，如影视制作、游戏开发等，以便更好地应用 AICG。
- **伦理意识**：在使用 AICG 时，需要关注伦理和法律问题，确保生成的内容符合相关规范。
